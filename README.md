# STM32 學習計畫 (Nucleo-F401RE)

## 階段 0: 預備知識 (第 0 週)

### 必備技能
- [ ] C 語言基礎 (變數、函式、指標、结构體)
- [ ] 了解二進制和十六進制
- [ ] 基本的電子學概念 (電壓、電流、電阻)
- [ ] 使用命令列介面 (終端機)

### 了解開發板
- [ ] 認識 Nucleo-F401RE 開發板
- [ ] 辨識 ST-LINK 調試器部分
- [ ] 辨識主晶片 STM32F401RE
- [ ] 找到 LED (LD2 - 綠色)、按鈕 (B1 - 使用者按鈕)
- [ ] 了解 Micro-USB 連接埠用途

### 購買材料清單
- [ ] Nucleo-F401RE 開發板
- [ ] 麵包板
- [ ] 跳線
- [ ] LED (紅、綠、藍)
- [ ] 按鈕開關
- [ ] 電阻 (220Ω、10kΩ)
- [ ] USB Micro-B 傳輸線

---

## 階段 1: 環境設定與基礎 (第 1-2 週)

### 環境設定
- [ ] 安裝 STM32CubeIDE (官方 IDE)
- [ ] 安裝 ST-Link 驅動程式
- [ ] 安裝 Git (版本控制)
- [ ] 安裝終端機模擬器 (PuTTY、TeraTerm)

### 基礎知識
- [ ] 了解 ARM Cortex-M4 架構
- [ ] 學習 F401RE 規格: 84MHz, 512KB Flash, 96KB RAM
- [ ] 閱讀 STM32 資料手冊和參考手冊
- [ ] 了解什麼是 HAL (硬體抽象層)
- [ ] 了解程式碼結構 (main.c, system_stm32f4xx.c)
- [ ] 了解啟動檔 (startup_stm32f401xe.s) 的作用

### 第一個專案
- [ ] 使用 CubeMX 建立 LED 閃爍專案
- [ ] 了解 HAL (硬體抽象層) 基礎
- [ ] 燒錄並偵錯你的第一個程式
- [ ] 使用 GPIO 函式: HAL_GPIO_WritePin、HAL_GPIO_TogglePin
- [ ] 使用 HAL_Delay 函式
- [ ] 理解時脈配置 (SystemClock_Config)

### 練習專案: 進階 LED 閃爍
- [ ] 雙 LED 閃爍 (不同頻率)
- [ ] 呼吸燈效果 (逐漸變亮變暗)
- [ ] 按鈕控制 LED 開關
- [ ] LED 跑馬燈效果

---

## 階段 2: 核心周邊裝置 (第 3-5 週)

### GPIO
- [ ] 輸入: 按鈕讀取、上拉/下拉
- [ ] 輸出: LED 控制、PWM 輸出
- [ ] 中斷: 外部中斷 (EXTI)
- [ ] 練習: 按鈕消抖動 (debounce)
- [ ] 練習: 多按鈕組合輸入

### 時脈系統
- [ ] 了解 PLL、HSE、HSI
- [ ] 設定系統時脈為 84MHz
- [ ] 周邊裝置的時脈啟用
- [ ] 了解時脈樹 (Clock Tree)
- [ ] 練習: 改變時脈速度觀察差異

### 計時器
- [ ] 基本計時器 (TIM2) 用於延遲
- [ ] PWM 產生 (TIM3/TIM4)
- [ ] 輸入擷取 (編碼器、頻率測量)
- [ ] SysTick 用於精確延遲
- [ ] 練習: 使用 TIM2 實現精確延遲
- [ ] 練習: PWM 控制 LED 亮度
- [ ] 練習: 使用 SysTick 測量程式執行時間

### UART
- [ ] 序列通訊 (115200 波特率)
- [ ] Printf 重導向至 UART
- [ ] DMA 用於 UART (可選)
- [ ] 練習: 從電腦發送命令控制 LED
- [ ] 練習: 序列埠顯示感測器數據

### 練習專案
- [ ] 序列埠命令解釋器
- [ ] 計時器中斷驅動的 LED 陣列
- [ ] 簡單的 PWM 調光器

---

## 階段 3: 進階周邊裝置 (第 6-8 週)

### ADC
- [ ] 單通道轉換
- [ ] 多通道掃描
- [ ] DMA 用於 ADC
- [ ] 練習: 讀取開發板上的電位器 (如果有的話)
- [ ] 練習: 讀取光敏電阻
- [ ] 練習: 讀取溫度感測器 (內部或外部)

### I2C
- [ ] 與感測器通訊
- [ ] EEPROM 讀寫
- [ ] 練習: 連接 OLED 顯示器 (SSD1306)
- [ ] 練習: 讀取 MPU6050 陀螺儀/加速度計
- [ ] 練習: 連接 BMP280 氣壓感測器

### SPI
- [ ] SPI 通訊
- [ ] 外部快閃記憶體/顯示器
- [ ] 練習: 連接 SPI 顯示器 (ILI9341)
- [ ] 練習: 使用 SD 卡模組

### USB (可選)
- [ ] 虛擬 COM 埠 (CDC)
- [ ] 練習: 開發板當作 USB 鍵盤/滑鼠

### DMA
- [ ] 了解 DMA 運作原理
- [ ] 使用 DMA 傳輸 ADC 資料
- [ ] 使用 DMA 傳輸 UART 資料

---

## 階段 4: 實際專案 (第 9-12 週)

### 專案構想
1. **溫度記錄器** - ADC + I2C 感測器 + UART 記錄
2. ** PWM 馬達控制** - TIM PWM + 編碼器回饋
3. **氣象站** - 多個感測器 + 顯示器
4. **無線通訊** - 藍牙/ WiFi 模組
5. **電子時鐘** - RTC + OLED 顯示
6. **遙控車** - PWM 馬達控制 + 藍牙遙控
7. **聲音感測器** - ADC + 麥克風模組
8. **觸控開關** - 電容式觸控感測

### 最佳實踐
- [ ] 複雜專案使用 FreeRTOS
- [ ] 實作適當的錯誤處理
- [ ] 撰寫乾淨、有文件的程式碼
- [ ] 使用版本控制 (Git)
- [ ] 學會使用示波器和邏輯分析儀
- [ ] 了解功耗優化技巧

---

## 除錯技巧

### 常見問題
- [ ] 程式無法燒錄 → 檢查 ST-Link 連接
- [ ] LED 不亮 → 檢查腳位配置
- [ ] 序列埠無輸出 → 檢查波特率設定
- [ ] 中斷不觸發 → 檢查中斷是否啟用
- [ ] 程式當機 → 使用除錯器檢查

### 除錯方法
- [ ] 使用 SWD 進行線上除錯
- [ ] 設定斷點檢查變數
- [ ] 使用 UART 輸出除錯資訊
- [ ] 使用 LED 狀態指示錯誤

---

## 學習資源

### 文件
- STM32F401xD/E 參考手冊 (RM0368)
- STM32F401 Nucleo 使用者手冊 (UM1724)
- HAL API 文件
- STM32F4 資料手冊

### 線上資源
- STM32CubeMX (程式碼產生器)
- ST Microelectronics YouTube
- ControllersTech (YouTube)
- STM32Duino wiki
- GitHub 上的 STM32 範例專案

### 書籍 (可選)
- "Mastering STM32" 作者 Carmine Noviello
- "Programming with STM32" 作者 Donald Norris

### 教學網站
- STM32 官方教學
- Elektormaker
- 程式工匠

---

## 工具總覽

| 工具 | 用途 |
|------|---------|
| STM32CubeIDE | 開發 IDE |
| STM32CubeMX | 腳位與時脈設定 |
| ST-Link Utility | 燒錄程式 |
| Saleae/Logic | 邏輯分析儀 (可選) |
| Oscilloscope | 訊號偵錯 (可選) |
| PuTTY/TeraTerm | 序列埠終端機 |

---

## 里程碑檢查清單

### 初學者階段
- [ ] 第 0 週: 準備開發環境和材料
- [ ] 第 1 週: 第一個 LED 閃爍
- [ ] 第 2 週: 按鈕控制 LED
- [ ] 第 2 週: 按鈕中斷

### 中級階段
- [ ] 第 3 週: UART 序列通訊
- [ ] 第 3 週: Printf 重導向
- [ ] 第 4 週: PWM 控制 LED 亮度
- [ ] 第 4 週: 計時器中斷
- [ ] 第 5 週: ADC 讀取

### 進階階段
- [ ] 第 6 週: I2C 感測器 (MPU6050/OLED)
- [ ] 第 7 週: SPI 顯示器
- [ ] 第 8 週: DMA 傳輸

### 專案階段
- [ ] 第 9-10 週: 選擇並開始專案
- [ ] 第 11 週: 專案整合與測試
- [ ] 第 12 週: 專案完成與優化
